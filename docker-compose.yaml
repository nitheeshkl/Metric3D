services:
  metric3d:
    image: cdqoowarobot.com:4567/qoowa/qoowa/depth_estimation:metric3d-latest
    build:
      context: ./
      dockerfile: ./docker/Dockerfile
      target: runtime
    container_name: metric3d
    ipc: host
    runtime: ${RUNTIME:-nvidia}
    privileged: true
    environment:
      - LOGNAME=$LOGNAME
      - DISPLAY=$DISPLAY
      - QT_X11_NO_MITSHM=1
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=all

# networks
networks:
  default:
    name: metrid3d